{% extends "dataedit/base.html" %}

{% block data_search %} {# This replaces the tiny search bar in the default template #}
{% endblock %}
{% block data_content %}
{% load dataedit.taghandler %}
<div class="searchbox_container small">
    <form action="/dataedit/search" role="form" method="post">{% csrf_token %}
        <div class="inner-addon right-addon">
            <a href="" type="submit" class="glyphicon glyphicon-search"></a>
            <input type="text" name="string" placeholder="Search for datasets" class="form-control" />
        </div>
        <div class="well">
<h4>Select tag filter:</h4>
            <div>
                {% for t_id, t_name, t_color in tags %}
                <span>
                    <input type="checkbox" class="hidden" name="select_{{t_id}}" id="select_{{t_id}}">
                    <label style="background:{{ t_color }}; color:{% readable_text_color t_color %}" class="btn tag" for="select_{{t_id}}" {%if t_id in selected %} checked {%endif%}>{{t_name}}</label>
                </span>
                {% endfor %}
            </div>
        </div>
    </form>
</div>
{%if not results %}
No matches found
{% endif %}
<div class="list-group">
{% for table in results %}
    <div class="inner-addon right-addon">
        <a class="list-group-item" href="/dataedit/view/{{table.schema.name}}/{{table.name}}">
            {% get_tags table=table schema=schema as table_tags%}
            {% include 'dataedit/tagged_field.html' with label=table tags=table_tags %}
        </a>
    </div>

{% endfor %}
</div>
{% endblock %}